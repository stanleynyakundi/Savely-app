LOG: ğŸ” Fetching a test user... []
LOG: âœ… Using User ID: 3 (stanleynakundi8@gmail.com) []
LOG: ğŸ’° Adding 1000 KES to balance for testing... []
LOG: ğŸ”’ Testing Lock Creation... []
ERROR: âŒ Lock Creation Failed: [{"name":"NeonDbError","severity":"ERROR","code":"22001","file":"varchar.c","line":"637","routine":"varchar"}]
LOG: âš ï¸ No active locks found to test unlock. []
LOG: ğŸ” Checking Transactions Schema... []
LOG: âœ… Columns: [[{"column_name":"callback_data","data_type":"jsonb","character_maximum_length":null},{"column_name":"user_id","data_type":"integer","character_maximum_length":null},{"column_name":"amount","data_type":"numeric","character_maximum_length":null},{"column_name":"created_at","data_type":"timestamp without time zone","character_maximum_length":null},{"column_name":"updated_at","data_type":"timestamp without time zone","character_maximum_length":null},{"column_name":"id","data_type":"integer","character_maximum_length":null},{"column_name":"phone_number","data_type":"character varying","character_maximum_length":20},{"column_name":"network_code","data_type":"character varying","character_maximum_length":10},{"column_name":"type","data_type":"character varying","character_maximum_length":10},{"column_name":"payhero_reference","data_type":"character varying","character_maximum_length":255},{"column_name":"status","data_type":"character varying","character_maximum_length":10},{"column_name":"payhero_transaction_id","data_type":"character varying","character_maximum_length":255}]]
LOG: ğŸ” Fetching a test user... []
LOG: âœ… Using User ID: 3 (stanleynakundi8@gmail.com) []
LOG: ğŸ’° Adding 1000 KES to balance for testing... []
LOG: ğŸ”’ Testing Lock Creation... []
ERROR: âŒ Lock Creation Failed: [{"name":"NeonDbError","severity":"ERROR","code":"23514","detail":"Failing row contains (33, 3, lock_created, 100.00, completed, null, 2026-02-14 14:07:13.401941, 2026-02-14 14:07:13.401941, null, null, null, null).","schema":"public","table":"transactions","constraint":"transactions_status_check","file":"execMain.c","line":"2084","routine":"ExecConstraints"}]
LOG: âš ï¸ No active locks found to test unlock. []
LOG: ğŸ” Fetching a test user... []
LOG: âœ… Using User ID: 3 (stanleynakundi8@gmail.com) []
LOG: ğŸ’° Adding 1000 KES to balance for testing... []
LOG: ğŸ”’ Testing Lock Creation... []
ERROR: âŒ Lock Creation Failed: [{"name":"NeonDbError","severity":"ERROR","code":"23514","detail":"Failing row contains (35, 3, lock_created, 100.00, success, null, 2026-02-14 14:08:55.255894, 2026-02-14 14:08:55.255894, null, null, null, null).","schema":"public","table":"transactions","constraint":"transactions_type_check","file":"execMain.c","line":"2084","routine":"ExecConstraints"}]
LOG: âš ï¸ No active locks found to test unlock. []
LOG: ğŸ” Fetching a test user... []
LOG: âœ… Using User ID: 3 (stanleynakundi8@gmail.com) []
LOG: ğŸ’° Adding 1000 KES to balance for testing... []
LOG: ğŸ”’ Testing Lock Creation... []
LOG: âœ… Lock Result: [[{"new_balance":"4900.00","id":6,"amount":"100.00","lock_duration_days":30,"unlock_date":"2026-03-16T11:09:27.863Z","penalty_rate":"10.00","status":"active"}]]
LOG: ğŸ”“ Testing Unlock for ID: 6... []
LOG: âœ… Unlock Result: [[{"saving_id":6,"new_balance":"4990.00"}]]
